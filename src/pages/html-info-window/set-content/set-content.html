<!--
  Generated template for the SetContentPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>SetContentPage</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>

  <div id="contentView">
    <div id="contentsFrame">
      <section class="demo">
        <p>
          You can display any HTMLElements in HtmlInfoWindow.
        </p>
        <div class="map" id="map_canvas"></div>
        <textarea readonly="readonly" class="prettyprint">
loadMap() {
  ...

  this.htmInfoWindow =  new HtmlInfoWindow();

  locations.forEach((markerOpts: MarkerOptions) => {
    let marker: Marker = this.map.addMarkerSync(markerOpts);

    // Listen the MARKER_CLICK event
    marker.on(GoogleMapsEvent.MARKER_CLICK).subscribe(this.onMarkerClick.bind(this));
  });
}
onMarkerClick(params: any[]) {
  // Get a marker instance from the passed parameters
  let marker: Marker = params.pop();

  // Create a component
  const compFactory = this.resolver.resolveComponentFactory(CustomTag);
  let compRef: ComponentRef<CustomTag> = compFactory.create(this.injector);
  compRef.instance.myTitle = marker.get("myTitle");
  this.appRef.attachView(compRef.hostView);

  let div = document.createElement('div');
  div.appendChild(compRef.location.nativeElement);

  // Dynamic rendering
  this._ngZone.run(() => {
    this.htmInfoWindow.setContent(div);
    this.htmInfoWindow.open(marker);
  });

  // Destroy the component when the htmlInfoWindow is closed.
  this.htmInfoWindow.one(GoogleMapsEvent.INFO_CLOSE).then(() => {
    compRef.destroy();
  });
}
</textarea>
      </section>
    </div>
  </div>
</ion-content>
